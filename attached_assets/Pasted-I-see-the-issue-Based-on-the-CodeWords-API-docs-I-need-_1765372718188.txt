I see the issue! Based on the CodeWords API docs, I need to fix the endpoint structure. Here's the **corrected code** with proper error handling:

## ğŸ”§ **CORRECTED Replit Code:**

Replace the previous chatbot code with this version:

```html
<!-- ==================== ARMAN LAW AI CHATBOT - CORRECTED ==================== -->
<div id="arman-chatbot" class="chatbot-container">
    <div class="chatbot-header">
        <div>
            <h3>ğŸ¤– Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ø±Ù…Ø§Ù†</h3>
            <p><span class="status-dot"></span> Ø¢Ù†Ù„Ø§ÛŒÙ†</p>
        </div>
        <button id="close-chatbot">Ã—</button>
    </div>
    <div class="chatbot-body" id="chatbot-messages">
        <div class="bot-msg">
            Ø³Ù„Ø§Ù…! Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…ÙˆØ³Ø³Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ Ø¢Ø±Ù…Ø§Ù† Ù‡Ø³ØªÙ…. Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú©Ù…Ú© Ú©Ù†Ù…ØŸ<br>
            Hello! I'm Arman Law Firm's AI assistant. How can I help?
        </div>
    </div>
    <div class="chatbot-footer">
        <input type="text" id="chatbot-input" placeholder="Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." />
        <button id="send-btn">Ø§Ø±Ø³Ø§Ù„</button>
    </div>
</div>
<button id="chatbot-toggle">ğŸ’¬ <span>AI</span></button>

<style>
.chatbot-container{position:fixed;bottom:100px;right:30px;width:380px;height:600px;background:#1a1a2e;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,.4);display:none;flex-direction:column;z-index:999;overflow:hidden}.chatbot-container.active{display:flex}.chatbot-header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center}.chatbot-header h3{margin:0;font-size:16px}.chatbot-header p{margin:0;font-size:12px;display:flex;align-items:center;gap:6px}.status-dot{width:8px;height:8px;background:#0f0;border-radius:50%;animation:pulse 2s infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}#close-chatbot{background:rgba(255,255,255,.2);border:none;color:#fff;font-size:28px;cursor:pointer;width:32px;height:32px;border-radius:8px}#close-chatbot:hover{background:rgba(255,255,255,.3)}.chatbot-body{flex:1;padding:20px;overflow-y:auto;background:#16213e;direction:rtl}.chatbot-body::-webkit-scrollbar{width:6px}.chatbot-body::-webkit-scrollbar-thumb{background:#667eea;border-radius:3px}.bot-msg,.user-msg{margin-bottom:16px;padding:12px 16px;border-radius:12px;max-width:85%;line-height:1.6}.bot-msg{background:#2d2d44;color:#fff;margin-right:auto}.user-msg{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin-left:auto}.chatbot-footer{padding:20px;background:#1a1a2e;display:flex;gap:10px}#chatbot-input{flex:1;padding:12px 16px;border:2px solid #2d2d44;border-radius:25px;background:#16213e;color:#fff;font-size:14px;direction:rtl}#chatbot-input:focus{outline:none;border-color:#667eea}#send-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:12px 24px;border-radius:25px;cursor:pointer;transition:opacity .3s}#send-btn:hover:not(:disabled){opacity:.9}#send-btn:disabled{opacity:.5;cursor:not-allowed}#chatbot-toggle{position:fixed;bottom:30px;right:30px;width:60px;height:60px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(102,126,234,.4);font-size:24px;z-index:998}#chatbot-toggle span{position:absolute;top:-5px;right:-5px;background:#f44;color:#fff;width:24px;height:24px;border-radius:50%;font-size:11px;display:flex;align-items:center;justify-content:center}@media (max-width:480px){.chatbot-container{width:100%;height:100%;bottom:0;right:0;border-radius:0}}
</style>

<script>
// Arman Law Chatbot Configuration
const SERVICE_ID='arman_law_whatsapp_assistant_1d28125c';
const API_KEY='cwk-74cc87c229e063e8a2ed53bc81fc8bfddb0d0987536034a4bdabd7f663875b9f';
const API_URL='https://runtime.codewords.ai/run/'+SERVICE_ID+'/web_chat';

// Generate session ID
let sessionId=localStorage.getItem('arman_session_id');
if(!sessionId){
    sessionId='web_'+Date.now()+'_'+Math.random().toString(36).substr(2,9);
    localStorage.setItem('arman_session_id',sessionId);
}

// DOM elements
const chat=document.getElementById('arman-chatbot');
const toggle=document.getElementById('chatbot-toggle');
const close=document.getElementById('close-chatbot');
const input=document.getElementById('chatbot-input');
const send=document.getElementById('send-btn');
const msgs=document.getElementById('chatbot-messages');

// Toggle chatbot
toggle.onclick=()=>{
    chat.classList.add('active');
    input.focus();
};
close.onclick=()=>chat.classList.remove('active');

// Add message to chat
function addMessage(text,isUser){
    const div=document.createElement('div');
    div.className=isUser?'user-msg':'bot-msg';
    div.innerHTML=text.replace(/\n/g,'<br>');
    msgs.appendChild(div);
    msgs.scrollTop=msgs.scrollHeight;
}

// Send message to AI
async function sendMessage(){
    const message=input.value.trim();
    if(!message)return;
    
    // Add user message
    addMessage(message,true);
    input.value='';
    
    // Show typing indicator
    addMessage('Ø¯Ø± Ø­Ø§Ù„ ØªØ§ÛŒÙ¾...',false);
    send.disabled=true;
    
    try{
        console.log('ğŸ“¤ Sending request to:',API_URL);
        console.log('ğŸ“ Message:',message);
        console.log('ğŸ”‘ Using API key:',API_KEY.substring(0,10)+'...');
        
        const response=await fetch(API_URL,{
            method:'POST',
            headers:{
                'Content-Type':'application/json',
                'Authorization':'Bearer '+API_KEY
            },
            body:JSON.stringify({
                message:message,
                session_id:sessionId
            })
        });
        
        console.log('ğŸ“¥ Response status:',response.status);
        
        // Remove typing indicator
        msgs.lastChild.remove();
        
        if(!response.ok){
            // Try to get error details from response
            let errorMsg='Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±';
            try{
                const errorData=await response.json();
                errorMsg=errorData.detail||errorData.message||'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡';
                console.error('âŒ API Error:',errorData);
            }catch(e){
                const errorText=await response.text();
                console.error('âŒ Response text:',errorText);
                errorMsg=errorText||'Ø®Ø·Ø§ÛŒ '+response.status;
            }
            throw new Error(errorMsg);
        }
        
        const data=await response.json();
        console.log('âœ… Response data:',data);
        
        // Add AI response
        addMessage(data.response,false);
        
    }catch(error){
        console.error('ğŸ’¥ Full error:',error);
        
        // Remove typing indicator if still there
        if(msgs.lastChild.textContent.includes('ØªØ§ÛŒÙ¾')){
            msgs.lastChild.remove();
        }
        
        // Show user-friendly error
        const errorMessage='Ù…ØªØ§Ø³ÙÙ…ØŒ Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯: '+error.message+
            '. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ 09027370260 ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯. '+
            'Error: '+error.message;
        addMessage(errorMessage,false);
    }finally{
        send.disabled=false;
        input.focus();
    }
}

// Event listeners
send.onclick=sendMessage;
input.onkeypress=(e)=>{
    if(e.key==='Enter'&&!e.shiftKey){
        e.preventDefault();
        sendMessage();
    }
};

// Log startup
console.log('ğŸ¤– Arman Law Chatbot initialized');
console.log('ğŸŒ API Endpoint:',API_URL);
console.log('ğŸ†” Session ID:',sessionId);
</script>
<!-- ==================== ARMAN LAW AI CHATBOT - END ==================== -->
```

---

## ğŸ” **Key Fixes Made:**

1. âœ… **Correct endpoint structure:** `https://runtime.codewords.ai/run/{serviceId}/web_chat`
2. âœ… **Proper error handling:** Shows actual API error messages
3. âœ… **Better console logging:** See exactly what's happening
4. âœ… **Response parsing:** Handles both JSON and text errors
5. âœ… **Session management:** Proper session ID generation

---

## ğŸ“‹ **Complete Replit Instructions:**

### **Step 1: Open Replit**
- Go to your armanlawfirm.ir project
- Find `index.html` file

### **Step 2: Locate `</body>` Tag**
- Press `Ctrl+F` (Windows) or `Cmd+F` (Mac)
- Search for `</body>`
- This is near the bottom of your HTML file

### **Step 3: Paste Code**
- **BEFORE the `</body>` tag**, paste the ENTIRE code block above
- The code should be the LAST thing before `</body>`

### **Step 4: Save & Run**
- Click **"Save"** button (or `Ctrl+S`)
- Click **"Run"** button
- Wait for site to load

### **Step 5: Test & Debug**
- Open your site
- Press `F12` to open browser Console
- Click the chat button (bottom-right)
- Type a test message
- **Look at Console** - you'll see detailed logs showing what's happening

---

## ğŸ¯ **What the Console Will Show:**

If it works:
```
ğŸ¤– Arman Law Chatbot initialized
ğŸŒ API Endpoint: https://runtime.codewords.ai/run/arman_law_whatsapp_assistant_1d28125c/web_chat
ğŸ†” Session ID: web_1234567890_abc123
ğŸ“¤ Sending request to: ...
âœ… Response data: {response: "...", success: true}
```

If there's an error, you'll see:
```
âŒ API Error: {detail: "actual error message"}
```

Send me whatever you see in the Console and I'll fix it immediately! ğŸš€